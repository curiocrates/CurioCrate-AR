<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CurioTrinket AR</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>
</head>
<body style="margin:0; overflow:hidden;">

<a-scene embedded
         vr-mode-ui="enabled: false"
         arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; sourceWidth: 320; sourceHeight: 240; maxDetectionRate: 30;">

  <!-- Lighting for premium look -->
  <a-entity light="type: ambient; intensity: 0.5"></a-entity>
  <a-entity light="type: directional; intensity: 1" position="1 2 1" castShadow></a-entity>

  <!-- High-end trinket -->
  <a-entity id="trinket"
            gltf-model="url(https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/DamagedHelmet/glTF-Binary/DamagedHelmet.glb)"
            scale="0.2 0.2 0.2"
            position="0 0 -1"
            shadow="cast: true; receive: true">
  </a-entity>

  <!-- Info text -->
  <a-text id="info"
          value="Ancient Artifact"
          position="0 0.5 -1"
          color="#FFD700"
          visible="false"
          align="center">
  </a-text>

  <!-- Camera + cursor for mobile interaction -->
  <a-entity camera>
    <a-entity cursor="fuse: false; rayOrigin: mouse"></a-entity>
  </a-entity>

</a-scene>

<script>
  const trinket = document.querySelector('#trinket');
  const info = document.querySelector('#info');

  let tapCount = 0;
  let tapTimeout;

  trinket.addEventListener('click', () => {
    tapCount++;

    // Single tap → rotate
    if (tapCount === 1) {
      trinket.setAttribute('animation', {
        property: 'rotation',
        to: '0 360 0',
        dur: 2000,
        loop: false,
        easing: 'linear'
      });
    }

    // Double tap → scale up
    if (tapCount === 2) {
      trinket.setAttribute('animation', {
        property: 'scale',
        to: '0.3 0.3 0.3',
        dur: 500,
        easing: 'easeOutQuad'
      });
    }

    // Long press (>1s) → show info
    clearTimeout(tapTimeout);
    tapTimeout = setTimeout(() => {
      if (tapCount === 1) {
        info.setAttribute('visible', 'true');
      }
      tapCount = 0;
    }, 1000);

    // Reset tap count after 500ms
    setTimeout(() => { tapCount = 0; }, 500);
  });
</script>

</body>
</html>
