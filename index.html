<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Interactive Cube Over Camera Feed</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-orbit-controls-component@1.3.0/dist/aframe-orbit-controls-component.min.js"></script>
  <style>
    body { margin:0; overflow:hidden; }
    video#camVideo { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:-1; }
  </style>
</head>
<body>

<button id="startButton" style="position:absolute; top:40%; left:50%; transform:translate(-50%, -50%); font-size:20px; padding:20px; z-index:10;">Start AR Cube</button>

<video id="camVideo" autoplay playsinline webkit-playsinline muted></video>

<a-scene embedded vr-mode-ui="enabled: false" style="display:none;" id="scene">
  <!-- Cube -->
  <a-box id="cube"
         position="0 1 -1"
         rotation="0 45 0"
         width="0.2"
         height="0.2"
         depth="0.2"
         color="gold"
         orbit-controls="target: 0 1 -1; enableDamping: true; dampingFactor:0.1; rotateSpeed:0.8; zoomSpeed:0.8; minDistance:0.3; maxDistance:2">
  </a-box>

  <!-- Camera -->
  <a-entity camera position="0 1.6 0"></a-entity>
</a-scene>

<script>
const startButton = document.getElementById("startButton");
const camVideo = document.getElementById("camVideo");
const scene = document.getElementById("scene");

startButton.addEventListener("click", async () => {
  try {
    // Start rear camera
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" }, audio: false });
    camVideo.srcObject = stream;
    camVideo.play();

    // Show A-Frame scene on top
    scene.style.display = "block";
    startButton.style.display = "none";
  } catch(err) {
    alert("Camera error: " + err);
  }
});
</script>

</body>
</html>
