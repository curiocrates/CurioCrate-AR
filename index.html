<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Interactive Cube on Camera Feed</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-orbit-controls-component@1.3.0/dist/aframe-orbit-controls-component.min.js"></script>
</head>
<body style="margin:0; overflow:hidden;">

<button id="startButton" style="position:absolute; top:40%; left:50%; transform:translate(-50%, -50%); font-size:20px; padding:20px;">Start AR Cube</button>

<video id="camVideo" autoplay playsinline webkit-playsinline style="display:none;"></video>

<a-scene embedded vr-mode-ui="enabled: false" id="scene" style="display:none;">

  <a-assets>
    <video id="camTexture" autoplay loop playsinline webkit-playsinline></video>
  </a-assets>

  <!-- Sky with video -->
  <a-sky src="#camTexture"></a-sky>

  <!-- Cube -->
  <a-box id="cube"
         position="0 1 -1"
         rotation="0 45 0"
         width="0.2"
         height="0.2"
         depth="0.2"
         color="gold"
         orbit-controls="target: 0 1 -1; enableDamping: true; dampingFactor:0.1; rotateSpeed:0.8; zoomSpeed:0.8; minDistance:0.3; maxDistance:2">
  </a-box>

  <!-- Camera -->
  <a-entity camera position="0 1.6 0"></a-entity>

</a-scene>

<script>
const startButton = document.getElementById("startButton");
const camVideo = document.getElementById("camVideo");
const camTexture = document.getElementById("camTexture");
const scene = document.getElementById("scene");

startButton.addEventListener("click", async () => {
  try {
    // Start rear camera
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" }, audio: false });
    camVideo.srcObject = stream;
    camVideo.play();

    // Set A-Frame video texture
    camTexture.srcObject = stream;
    camTexture.play();

    // Show scene
    scene.style.display = "block";
    startButton.style.display = "none";
  } catch(err) {
    alert("Camera error: " + err);
  }
});
</script>

</body>
</html>
